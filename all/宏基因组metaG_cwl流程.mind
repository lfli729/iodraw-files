{"root":{"data":{"id":"d3b98ei8usxs","created":1723193833273,"text":"metaG_cwl_pipline_v2.3"},"children":[{"data":{"id":"d3b99b9qik8w","created":1723193904592,"text":"数据质控","priority":1},"children":[{"data":{"id":"d3b9leyy29s0","created":1723194853017,"text":"step1.1 create_cfg_file"},"children":[{"data":{"id":"d3d024jf7z7k","created":1723371071316,"text":"调用的脚本是：metaG_main_pipeline/create_cfg.py"},"children":[]},{"data":{"id":"d3d025xlmrr4","created":1723371074350,"text":"id: create_cfg_file【任务名称前缀以及输出文件前缀】"},"children":[]},{"data":{"id":"d3d02ods8rgg","created":1723371114510,"text":"重要参数解释"},"children":[{"data":{"id":"d3d04oovtxc0","created":1723371271910,"text":"项目信息、客户信息、报告信息"},"children":[]},{"data":{"id":"d3d04vo6nu9s","created":1723371287105,"text":"去除宿主污染，数据质控过滤"},"children":[{"data":{"id":"d3d05bvvld6o","created":1723371322399,"text":"-host_genome      宿主基因组序列，是否选去宿主"},"children":[]},{"data":{"id":"d3d05imiqx34","created":1723371337070,"text":"-Species           物种拉丁名，默认None"},"children":[]},{"data":{"id":"d3d05mn52fpc","created":1723371345815,"text":"-Genome_version   基因组版本，默认是None"},"children":[]}]},{"data":{"id":"d3d05t5nhy4g","created":1723371359995,"text":"组装参数设置"},"children":[{"data":{"id":"d3d05y03tt6o","created":1723371370544,"text":"-assembly_method 组装参数设置：组装软件选择，默认是Megahit，可供选择还有：IDBA_UD"},"children":[]},{"data":{"id":"d3d0600o82kg","created":1723371374932,"text":"-mininum_contig   组装参数设置：最短contig长度，默认是300"},"children":[]}]},{"data":{"id":"d3d068kkb37k","created":1723371393549,"text":"基因预测参数设置"},"children":[{"data":{"id":"d3d06dab3sw0","created":1723371403812,"text":"-minimum_gene_length  基因预测参数设置：最短基因序列长度，默认是100"},"children":[]}]},{"data":{"id":"d3d06ewbqeww","created":1723371407320,"text":"基因集参数设置"},"children":[{"data":{"id":"d3d06mxsn4zk","created":1723371424824,"text":"-cluster_identity   基因集参数设置：蛋白序列聚类相似度，默认0.95"},"children":[]},{"data":{"id":"d3d06quqmg3k","created":1723371433346,"text":"-cluster_coverage  基因集参数设置：蛋白序列聚类覆盖度默认0.9"},"children":[]},{"data":{"id":"d3d06uhet88w","created":1723371441247,"text":"-cluster_abund_identity   基因集参数设置：基因丰度计算相似度，默认0.95"},"children":[]}]},{"data":{"id":"d3d06y9z5ngg","created":1723371449505,"text":"环境因子"},"children":[{"data":{"id":"d3d07246scg0","created":1723371457862,"text":"-isEnableEnvFactor    是否进行环境因子分析，默认None"},"children":[]},{"data":{"id":"d3d075j8olc0","created":1723371465302,"text":"-env             环境因子文件"},"children":[]}]},{"data":{"id":"d3d079e4cmww","created":1723371473700,"text":"样本分组信息"},"children":[{"data":{"id":"d3d07cg9lc00","created":1723371480360,"text":"-isGrouping         是否分组"},"children":[]},{"data":{"id":"d3d07fxs52ww","created":1723371487949,"text":"-groupData       分组数据"},"children":[]}]}]},{"data":{"id":"d3d02ybmiygw","created":1723371136148,"text":"脚本用途"},"children":[{"data":{"id":"d3d034y8zncw","created":1723371150576,"text":"1.宿主基因组路径：/share/nas2/database/genome/\n若选去宿主，拼接拉丁名版本并链接到该结果路径下"},"children":[]},{"data":{"id":"d3d03fukgu0w","created":1723371174298,"text":"2.根据样本列表和fq列表输出data.cfg"},"children":[]},{"data":{"id":"d3d040kcdkw0","created":1723371219393,"text":"3.根据分组信息和样本列表输出group.txt"},"children":[]},{"data":{"id":"d3d04465hx4w","created":1723371227242,"text":"4.根据前端反馈环境因子输出env.txt"},"children":[]},{"data":{"id":"d3d0491bkjy8","created":1723371237833,"text":"5.根据所选配置信息输出配置文件detail.cfg"},"children":[]},{"data":{"id":"d3d04at9w8hs","created":1723371241700,"text":"6.修改fq名称"},"children":[]}]},{"data":{"id":"d3d08ab0nhfk","created":1723371554053,"text":"任务关联"},"children":[{"data":{"id":"d3d08jurs2kg","created":1723371574839,"text":"最开始任务"},"children":[]}]}]},{"data":{"id":"d3b9lj2vu1vk","created":1723194861962,"text":"step1.2 data_list_compress"},"children":[{"data":{"id":"d3d099ul2iv4","created":1723371631424,"text":"调用脚本：metaG_main_pipeline/creat_list_compress.py"},"children":[]},{"data":{"id":"d3d09jp1pjb4","created":1723371652857,"text":"id: data_list_compress"},"children":[]},{"data":{"id":"d3d09y0rb08w","created":1723371684040,"text":"脚本用途"},"children":[{"data":{"id":"d3d0a7i8qf40","created":1723371704688,"text":"1.数据压缩，因为上一步只是链接原始数据并改名，fq在该步骤压缩"},"children":[]},{"data":{"id":"d3d0abnnugw0","created":1723371713723,"text":"2.生成样本名.list文件，内容是../input/samname*.fq.gz【下游分析依赖】"},"children":[]}]},{"data":{"id":"d3d0ajfllk3k","created":1723371730650,"text":"输出文件夹：data_list_compress_*"},"children":[]},{"data":{"id":"d3d0aoswds00","created":1723371742338,"text":"任务关联"},"children":[{"data":{"id":"d3d0cnt9vfgg","created":1723371896912,"text":"任务上级create_cfg_file"},"children":[]},{"data":{"id":"d3d0crn0eoe8","created":1723371905240,"text":"任务下级data_process_fastp和data_process_stat"},"children":[]}]}]},{"data":{"id":"d3b9llhv5clc","created":1723194867222,"text":"step2 raw_preparation"},"children":[{"data":{"id":"d3d0d5r7u70g","created":1723371935971,"text":"调用脚本：metaG_main_pipeline/preparation.py"},"children":[]},{"data":{"id":"d3d0d7fx3aio","created":1723371939640,"text":"id: raw_preparation"},"children":[]},{"data":{"id":"d3d0dspttczk","created":1723371985952,"text":"重要参数设置"},"children":[{"data":{"id":"d3d0dw300tmo","created":1723371993278,"text":"-dcfg       项目的data.cfg"},"children":[]},{"data":{"id":"d3d0e120hr0g","created":1723372004103,"text":"-config      项目的detail.cfg"},"children":[]},{"data":{"id":"d3d0e4pudfk0","created":1723372012074,"text":"-group      项目的group.txt"},"children":[]},{"data":{"id":"d3d0eb1gezuo","created":1723372025837,"text":"-env        项目的环境因子文件env.txt"},"children":[]}]},{"data":{"id":"d3d0eh2wad4w","created":1723372038985,"text":"脚本用途"},"children":[{"data":{"id":"d3d0ess4zaps","created":1723372064455,"text":"1.新建python列表，从输入的项目配置文件中获取项目名称、项目编号、流程版本、环境因子数据、分组信息、数据路径等信息；"},"children":[]},{"data":{"id":"d3d0evv5ejnk","created":1723372071168,"text":"2.列表使用json.dumps()函数序列化为json文件，即输出文件：metadata.properties"},"children":[]}]},{"data":{"id":"d3d0f23cfgu8","created":1723372084724,"text":"输出文件夹：raw_preparation_*"},"children":[]},{"data":{"id":"d3d0aoswds00","created":1723371742338,"text":"任务关联"},"children":[{"data":{"id":"d3d0cnt9vfgg","created":1723371896912,"text":"任务上级create_cfg_file"},"children":[]},{"data":{"id":"d3d0crn0eoe8","created":1723371905240,"text":"任务下级report"},"children":[]}]}]},{"data":{"id":"d3b9lnuijxmo","created":1723194872340,"text":"step3.1 data_process_fastp_filter low quality"},"children":[{"data":{"id":"d3d0g06mp1q8","created":1723372158933,"text":"调用脚本：metaG_main_pipeline/data_process_fastp.py"},"children":[]},{"data":{"id":"d3d0ga06wg74","created":1723372180312,"text":"id: data_process_fastp"},"children":[]},{"data":{"id":"d3d0geaung8w","created":1723372189664,"text":"script.cfg：/share/nas2/genome/cloud_soft/developer_platform/module_script/metagenome_cwl_pipline/release/v2.3/metaG_main_pipeline/script.cfg"},"children":[]},{"data":{"id":"d3d0h2fxhrsw","created":1723372242213,"text":"脚本用途"},"children":[{"data":{"id":"d3d0h9t5wz5s","created":1723372258251,"text":"1.先读序列fastq文件前1000行判断质量值类型是64还是33;"},"children":[]},{"data":{"id":"d3d0hec94c1s","created":1723372268113,"text":"2.读入脚本配置文件script.cfg获取质控软件fastp路径；"},"children":[]},{"data":{"id":"d3d0hgtozaww","created":1723372273521,"text":"3.对双端数据使用fastp进行质控，若质量值类型是64多参数--phred64；"},"children":[]},{"data":{"id":"d3d0ih1wntog","created":1723372352381,"text":"4.其余比对参数一致","layout_right_offset":{"x":0,"y":-4}},"children":[{"data":{"id":"d3d0inckzxfk","created":1723372366088,"text":"-i 输入fq1  -I 输入fq2 -o 输出fq1 -O 输出fq2 --unpaired1 fq1未配对序列 --unpaired2 fq2未配对序列  \n-5 使用 5' 端质量控制 -W 50 滑动窗口的大小为 50 -M 20 最小的平均质量阈值为 20 -l 60 短于60的序列丢弃\n -n 0 不允许含N序列 --thread 4 -g 强制修剪plyg尾  -A 不去接头 --json {} --html {}"},"children":[]}]}]},{"data":{"id":"d3d0jbaguscg","created":1723372418203,"text":"输出文件夹：data_process_fastp_*"},"children":[]},{"data":{"id":"d3d0aoswds00","created":1723371742338,"text":"任务关联"},"children":[{"data":{"id":"d3d0cnt9vfgg","created":1723371896912,"text":"上级任务data_list_compress"},"children":[]},{"data":{"id":"d3d0crn0eoe8","created":1723371905240,"text":"下级任务data_process_stat和data_process_rmhost"},"children":[]}]}]},{"data":{"id":"d3czzq57h3wg","created":1723370883253,"text":"steps3.2 host_db"},"children":[{"data":{"id":"d3d0kgv66y2o","created":1723372508703,"text":"调用脚本：metaG_main_pipeline/data_process_hostdb.py"},"children":[]},{"data":{"id":"d3d0klj1991c","created":1723372518853,"text":"id: data_process_hostdb"},"children":[]},{"data":{"id":"d3d0lkztl62o","created":1723372596055,"text":"脚本用途"},"children":[{"data":{"id":"d3d0lqdwmbr4","created":1723372607790,"text":"1.从项目的配置文件detail.cfg中获得宿主基因组的路径；"},"children":[]},{"data":{"id":"d3d0ltw61iww","created":1723372615425,"text":"2.若宿主基因组未构建bowtie2索引直接建索引，若已有索引文件直接链接。"},"children":[]}]},{"data":{"id":"d3d0lxtmr8xs","created":1723372623979,"text":"输出文件夹：data_process_hostdb_*"},"children":[]},{"data":{"id":"d3d0aoswds00","created":1723371742338,"text":"任务关联"},"children":[{"data":{"id":"d3d0cnt9vfgg","created":1723371896912,"text":"上级任务data_list_compress"},"children":[]},{"data":{"id":"d3d0crn0eoe8","created":1723371905240,"text":"下级任务data_process_stat和data_process_rmhost"},"children":[]}]}]},{"data":{"id":"d3d00wpy3vnk","created":1723370975932,"text":"steps3.3 data_process_rmhos"},"children":[{"data":{"id":"d3d0moqux62o","created":1723372682584,"text":"调用脚本：metaG_main_pipeline/data_process_rmhost.py"},"children":[]},{"data":{"id":"d3d0mt4o0934","created":1723372692126,"text":"id: data_process_rmhost"},"children":[]},{"data":{"id":"d3d0n01wcd8g","created":1723372707196,"text":"脚本用途"},"children":[{"data":{"id":"d3d0n57xu9s0","created":1723372718446,"text":"1.若不进行去宿主污染，则直接将质控后的数据链接过来改名作为输出文件；"},"children":[]},{"data":{"id":"d3d0nastpedc","created":1723372730592,"text":"2.若进行去宿主污染，使用bowtie2比对宿主库；"},"children":[]},{"data":{"id":"d3d0nfl5xn28","created":1723372741013,"text":"比对参数：bowtie2 --seed 123456【设置随机数种子，用于生成随机性，方便重复运行时得到相同的结果】\n -I 200【设定较小的插入片段（insert）长度的下限】 -X 1000【设定插入片段（insert）长度的上限】\n --phred33【指定输入数据的质量分数使用 Phred 33 编码】 --threads 4 -x 【指定构建的索引的路径和前缀名称】 \n-1 【一端 reads 的文件】 -2 【二端 reads 的文件】 --un-conc-gz 【未比对成功的 paired-end reads 输出到压缩文件中】 \n-S 【输出比对结果的 SAM 格式文件路径】"},"children":[]}]},{"data":{"id":"d3d0ozfaspvk","created":1723372862558,"text":"输出文件夹：data_process_rmhost_*"},"children":[]},{"data":{"id":"d3d0aoswds00","created":1723371742338,"text":"任务关联"},"children":[{"data":{"id":"d3d0cnt9vfgg","created":1723371896912,"text":"上级任务data_process_fastp和data_process_hostdb"},"children":[]},{"data":{"id":"d3d0crn0eoe8","created":1723371905240,"text":"下级任务data_process_stat_backup、genome_assembly_coverage_length、genome_assembly_preparation_cleanData、genome_assembly、data_process_stat"},"children":[]}]}]},{"data":{"id":"d3d017mihf5s","created":1723370999669,"text":"steps3.4 data_process_stat"},"children":[{"data":{"id":"d3d0qisrr6rk","created":1723372983096,"text":"调用脚本：metaG_main_pipeline/data_process_stat.py"},"children":[]},{"data":{"id":"d3d0qn0o3z0g","created":1723372992281,"text":"id: data_process_stat"},"children":[]},{"data":{"id":"d3d0rgmbkbnk","created":1723373056716,"text":"分支主题"},"children":[]}]},{"data":{"id":"d3d01mwjfta8","created":1723371032927,"text":"steps3.5 data_process_stat_backup"},"children":[]}]},{"data":{"id":"d3b9apbb7da8","created":1723194013527,"text":"组装","priority":2},"children":[]},{"data":{"id":"d3b9azzpd8u8","created":1723194036770,"text":"基因集构建","priority":3},"children":[]},{"data":{"id":"d3b9b8bw9reo","created":1723194054921,"text":"功能注释","priority":4},"children":[]},{"data":{"id":"d3b9be2nldds","created":1723194067423,"text":"功能多样性分析","priority":5},"children":[]},{"data":{"id":"d3b9bm58ymtc","created":1723194084994,"text":"物种多样性分析","priority":6},"children":[]},{"data":{"id":"d3b9bstt0f7k","created":1723194099540,"text":"生成报告report","priority":7},"children":[]}]},"template":"right","theme":"fresh-green-compat","version":"1.4.43"}