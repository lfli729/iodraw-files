{"root":{"data":{"id":"d3efv55rqtq8","created":1723517221833,"text":"数据质控"},"children":[{"data":{"id":"d3efvzoewe80","created":1723517288264,"text":"step1.1 create_cfg_file"},"children":[{"data":{"id":"d3eg5gi47fgg","created":1723518030167,"text":"调用的脚本是：create_cfg.py"},"children":[]},{"data":{"id":"d3eg5oudl7gg","created":1723518048321,"text":"id: create_cfg_file【任务名称前缀以及输出文件前缀】"},"children":[]},{"data":{"id":"d3efw631dyww","created":1723517302209,"text":"重要参数"},"children":[{"data":{"id":"d3efxfa27x1c","created":1723517400589,"text":"项目信息、客户信息、报告信息、分析路径等基本参数"},"children":[]},{"data":{"id":"d3efwozae0ow","created":1723517343341,"text":"去除宿主污染，数据质控过滤"},"children":[{"data":{"id":"d3egj3l6pl34","created":1723519099152,"text":"-host_genome      宿主基因组序列，是否选去宿主"},"children":[]},{"data":{"id":"d3egja0613i8","created":1723519113118,"text":"-Species           物种拉丁名，默认None"},"children":[]},{"data":{"id":"d3egjdijvhmo","created":1723519120760,"text":"-Genome_version   基因组版本，默认是None"},"children":[]}]},{"data":{"id":"d3egji9nysxs","created":1723519131107,"text":"组装参数设置"},"children":[{"data":{"id":"d3egjn0hnsao","created":1723519141436,"text":"-assembly_method 组装参数设置：组装软件选择，二代【默认是Megahit，可供选择还有：IDBA_UD】、三代只有Flye"},"children":[]},{"data":{"id":"d3egjt5olyps","created":1723519154811,"text":"-mininum_contig   组装参数设置：最短contig长度，默认是300"},"children":[]}]},{"data":{"id":"d3egjxe1zsw0","created":1723519164024,"text":"基因预测参数设置"},"children":[{"data":{"id":"d3egk167ijgg","created":1723519172257,"text":"-minimum_gene_length  基因预测参数设置：最短基因序列长度，默认是100"},"children":[]}]},{"data":{"id":"d3egk4nxmrcw","created":1723519179859,"text":"基因集参数设置"},"children":[{"data":{"id":"d3egk8361ji8","created":1723519187310,"text":"-cluster_identity   基因集参数设置：蛋白序列聚类相似度，默认0.95"},"children":[]},{"data":{"id":"d3egkby8alts","created":1723519195719,"text":"-cluster_coverage  基因集参数设置：蛋白序列聚类覆盖度默认0.9"},"children":[]},{"data":{"id":"d3egkdcurbpc","created":1723519198780,"text":"-cluster_abund_identity   基因集参数设置：基因丰度计算相似度，默认0.95"},"children":[]}]},{"data":{"id":"d3egkrfo016o","created":1723519229425,"text":"环境因子"},"children":[{"data":{"id":"d3egksv36d4w","created":1723519232534,"text":"-isEnableEnvFactor    是否进行环境因子分析，默认None"},"children":[]},{"data":{"id":"d3egkwml68lc","created":1723519240727,"text":"-env             环境因子文件"},"children":[]}]},{"data":{"id":"d3eglfq4648w","created":1723519282299,"text":"样本分组信息"},"children":[{"data":{"id":"d3eglkevps00","created":1723519292504,"text":"-isGrouping         是否分组"},"children":[]},{"data":{"id":"d3egloa6qdc0","created":1723519300927,"text":"-groupData       分组数据"},"children":[]}]},{"data":{"id":"d3egn671de68","created":1723519418283,"text":"三代新增的参数"},"children":[{"data":{"id":"d3egnargjmyo","created":1723519428225,"text":"-plat       测序平台，默认nanopore"},"children":[]},{"data":{"id":"d3egnk8y5beo","created":1723519448874,"text":"-ont_fqs  \tont序列原始列表"},"children":[]},{"data":{"id":"d3ego7abxce8","created":1723519499023,"text":"-taxa_method   \ttaxonomy分类群注释方式，可以选reads默认或者是gene【未使用该参数】"},"children":[]},{"data":{"id":"d3egoeu0teyo","created":1723519515451,"text":"-fun_db 功能注释的数据库默认是Nr,KEGG,eggNOG,Pfam,GO,Swissprot,CAZy,CARD,PHI,P450,VFDB"},"children":[]}]}]},{"data":{"id":"d3egpbyent34","created":1723519587550,"text":"脚本用途"},"children":[{"data":{"id":"d3egpjemqs5c","created":1723519603769,"text":"1.宿主基因组路径：/share/nas2/database/genome/\n若选去宿主，拼接拉丁名版本并链接到该结果路径下"},"children":[]},{"data":{"id":"d3egpnscpo8w","created":1723519613306,"text":"2.根据样本列表和fq列表输出data.cfg"},"children":[]},{"data":{"id":"d3egprq9j6dc","created":1723519621886,"text":"3.根据分组信息和样本列表输出group.txt"},"children":[]},{"data":{"id":"d3egpus4sow0","created":1723519628530,"text":"4.根据前端反馈环境因子输出env.txt"},"children":[]},{"data":{"id":"d3egpxralzi8","created":1723519635009,"text":"5.根据所选配置信息输出配置文件detail.cfg"},"children":[]},{"data":{"id":"d3egq1d24yrk","created":1723519642856,"text":"6.修改fq名称"},"children":[]}]},{"data":{"id":"d3egq5fix24g","created":1723519651712,"text":"任务关联"},"children":[{"data":{"id":"d3egqddb9n9c","created":1723519668992,"text":"最开始任务"},"children":[]}]}]},{"data":{"id":"d3efw3bj9nuo","created":1723517296192,"text":"step1.2 data_list_compress\n【三代无】"},"children":[{"data":{"id":"d3ej1dyccao0","created":1723526174493,"text":"调用脚本：creat_list_compress.py"},"children":[]},{"data":{"id":"d3ej1gldzbi8","created":1723526180237,"text":"id: data_list_compress"},"children":[]},{"data":{"id":"d3ej1m64wvls","created":1723526192375,"text":"脚本用途"},"children":[{"data":{"id":"d3ej1t422nls","created":1723526207487,"text":"1.数据压缩，因为上一步只是链接原始数据并改名，fq在该步骤压缩"},"children":[]},{"data":{"id":"d3ej1uahxon4","created":1723526210053,"text":"2.生成样本名.list文件，内容是../input/samname*.fq.gz【下游分析依赖】"},"children":[]}]},{"data":{"id":"d3ej20196kg0","created":1723526222555,"text":"输出文件夹：data_list_compress_*"},"children":[]},{"data":{"id":"d3ej23kzgf7k","created":1723526230278,"text":"任务关联"},"children":[{"data":{"id":"d3ej2hnb9yps","created":1723526260894,"text":"任务上级create_cfg_file"},"children":[]},{"data":{"id":"d3ej2itq7pc0","created":1723526263459,"text":"任务下级data_process_fastp和data_process_stat"},"children":[]}]}]},{"data":{"id":"d3ej1kgqytj4","created":1723526188663,"text":"step2 raw_preparation"},"children":[{"data":{"id":"d3ej35w3z8xs","created":1723526313669,"text":"调用脚本：preparation.py"},"children":[]},{"data":{"id":"d3ej38fzl05c","created":1723526319224,"text":"id: raw_preparation"},"children":[]},{"data":{"id":"d3ej4fejb85c","created":1723526412738,"text":"重要参数设置"},"children":[{"data":{"id":"d3ej4ixzbcw0","created":1723526420444,"text":"-dcfg       项目的data.cfg"},"children":[]},{"data":{"id":"d3ej4lxw2qrk","created":1723526426969,"text":"-config      项目的detail.cfg"},"children":[]},{"data":{"id":"d3ej4p6hl0qo","created":1723526434019,"text":"-group      项目的group.txt"},"children":[]},{"data":{"id":"d3ej4sevoirk","created":1723526441057,"text":"-env        项目的环境因子文件env.txt"},"children":[]}]},{"data":{"id":"d3ej4yjjqry8","created":1723526454400,"text":"脚本用途"},"children":[{"data":{"id":"d3ej51gvslj4","created":1723526460769,"text":"1.新建python列表，从输入的项目配置文件中获取项目名称、项目编号、流程版本、环境因子数据、分组信息、数据路径等信息；"},"children":[]},{"data":{"id":"d3ej54q8ayv4","created":1723526467865,"text":"2.列表使用json.dumps()函数序列化为json文件，即输出文件：metadata.properties"},"children":[]}]},{"data":{"id":"d3ej59ymrbwg","created":1723526479257,"text":"输出文件夹：raw_preparation_*"},"children":[]},{"data":{"id":"d3ej5d03nklc","created":1723526485876,"text":"任务关联"},"children":[{"data":{"id":"d3ej5e8pu680","created":1723526488574,"text":"任务上级create_cfg_file"},"children":[]},{"data":{"id":"d3ej5hex083k","created":1723526495479,"text":"任务下级report"},"children":[]}]}]},{"data":{"id":"d3ej6z8ujri8","created":1723526612658,"text":"step3.1 data_process_fastp_filter low quality\n【三代无】"},"children":[{"data":{"id":"d3ej7lpsw0lc","created":1723526661573,"text":"调用脚本：metaG_main_pipeline/data_process_fastp.py"},"children":[]},{"data":{"id":"d3ej7q16vpj4","created":1723526670968,"text":"id: data_process_fastp"},"children":[]},{"data":{"id":"d3ej7tkw2tq8","created":1723526678690,"text":"script.cfg：/share/nas2/genome/cloud_soft/developer_platform/module_script/metagenome_cwl_pipline/release/v2.3/metaG_main_pipeline/script.cfg"},"children":[]},{"data":{"id":"d3ej7xx4vaww","created":1723526688137,"text":"脚本用途"},"children":[{"data":{"id":"d3ej8134tfr4","created":1723526695030,"text":"1.先读序列fastq文件前1000行判断质量值类型是64还是33;"},"children":[]},{"data":{"id":"d3ej8srgkagw","created":1723526755274,"text":"2.读入脚本配置文件script.cfg获取质控软件fastp路径；"},"children":[]},{"data":{"id":"d3ej8vs22hog","created":1723526761841,"text":"3.对双端数据使用fastp进行质控，若质量值类型是64多参数--phred64；"},"children":[]},{"data":{"id":"d3ej8yts6ps0","created":1723526768476,"text":"4.其余比对参数一致","layout_right_offset":{"x":-1,"y":8}},"children":[{"data":{"id":"d3ej922fbdog","created":1723526775528,"text":"-i 输入fq1  -I 输入fq2 -o 输出fq1 -O 输出fq2 --unpaired1 fq1未配对序列 --unpaired2 fq2未配对序列  \n-5 使用 5' 端质量控制 -W 50 滑动窗口的大小为 50 -M 20 最小的平均质量阈值为 20 -l 60 短于60的序列丢弃\n -n 0 不允许含N序列 --thread 4 -g 强制修剪plyg尾  -A 不去接头 --json {} --html {}"},"children":[]}]}]},{"data":{"id":"d3ej9c1hc6bk","created":1723526797239,"text":"输出文件夹：data_process_fastp_*"},"children":[]},{"data":{"id":"d3ej9f6vxbls","created":1723526804096,"text":"任务关联"},"children":[{"data":{"id":"d3ej9i3837y8","created":1723526810405,"text":"上级任务data_list_compress"},"children":[]},{"data":{"id":"d3ej9jggdaf4","created":1723526813382,"text":"下级任务data_process_stat和data_process_rmhost"},"children":[]}]}]},{"data":{"id":"d3ejdb8exa80","created":1723527108938,"text":"去宿主"},"children":[{"data":{"id":"d3ejdev9e1hc","created":1723527116851,"text":"二代"},"children":[{"data":{"id":"d3ejajomj37k","created":1723526892240,"text":"steps3.2 host_db"},"children":[{"data":{"id":"d3ejatpcn85c","created":1723526914052,"text":"调用脚本：data_process_hostdb.py"},"children":[]},{"data":{"id":"d3ejawsfer5s","created":1723526920768,"text":"id: data_process_hostdb"},"children":[]},{"data":{"id":"d3ejb0cbd4ao","created":1723526928501,"text":"脚本用途"},"children":[{"data":{"id":"d3ejebfggw74","created":1723527187728,"text":"1.从项目的配置文件detail.cfg中获得宿主基因组的路径；"},"children":[]},{"data":{"id":"d3ejecshgfsw","created":1723527190693,"text":"2.若宿主基因组未构建bowtie2索引直接建索引，若已有索引文件直接链接。"},"children":[]}]}]},{"data":{"id":"d3ejl134rs3k","created":1723527713764,"text":"steps3.3 data_process_rmhos"},"children":[{"data":{"id":"d3ejlvx6kidc","created":1723527780885,"text":"调用脚本：metaG_main_pipeline/data_process_rmhost.py"},"children":[]},{"data":{"id":"d3ejlzzfknpc","created":1723527789728,"text":"id: data_process_rmhost"},"children":[]},{"data":{"id":"d3ejm44zvd34","created":1723527798772,"text":"脚本用途","expandState":"expand"},"children":[{"data":{"id":"d3ejm7skl5hc","created":1723527806727,"text":"1.若不进行去宿主污染，则直接将质控后的数据链接过来改名作为输出文件；"},"children":[]},{"data":{"id":"d3ejm9sd75ds","created":1723527811069,"text":"2.若进行去宿主污染，使用bowtie2比对宿主库；","expandState":"expand"},"children":[]},{"data":{"id":"d3ejmcz8n9q8","created":1723527818015,"text":"比对参数：bowtie2 --seed 123456【设置随机数种子，用于生成随机性，方便重复运行时得到相同的结果】\n -I 200【设定较小的插入片段（insert）长度的下限】 -X 1000【设定插入片段（insert）长度的上限】\n --phred33【指定输入数据的质量分数使用 Phred 33 编码】 --threads 4 -x 【指定构建的索引的路径和前缀名称】 \n-1 【一端 reads 的文件】 -2 【二端 reads 的文件】 --un-conc-gz 【未比对成功的 paired-end reads 输出到压缩文件中】 \n-S 【输出比对结果的 SAM 格式文件路径】"},"children":[]}]}]}]},{"data":{"id":"d3ejdl0s3hfk","created":1723527130245,"text":"三代"},"children":[{"data":{"id":"d3ejdnealtds","created":1723527135415,"text":"steps 3.1 host_db"},"children":[{"data":{"id":"d3eje2oi4g74","created":1723527168684,"text":"调用脚本：data_process_hostdb.py"},"children":[]},{"data":{"id":"d3ejh5uf5bsw","created":1723527410665,"text":"脚本用途"},"children":[{"data":{"id":"d3ejhcryu0ao","created":1723527425754,"text":"1.从项目的配置文件detail.cfg中获得宿主基因组的路径；"},"children":[]},{"data":{"id":"d3ejhggnh8g0","created":1723527433777,"text":"2.比对软件是使用长序列比对软件minimap2，将索引链接过来，若无索引则建索引"},"children":[]}]}]},{"data":{"id":"d3ejl2zyv4e8","created":1723527717927,"text":"steps 3.2 data_process_rmhost"},"children":[{"data":{"id":"d3ejldd2qozk","created":1723527740487,"text":"调用脚本：data_process_rmhost.py"},"children":[]},{"data":{"id":"d3ejndbhgf7k","created":1723527897119,"text":"脚本用途"},"children":[{"data":{"id":"d3ejpy2pr3ls","created":1723528099030,"text":"1.若不进行去宿主污染，则直接将质控后的数据链接过来改名作为输出文件；"},"children":[]},{"data":{"id":"d3ejq0eltn28","created":1723528104102,"text":"2.若进行去宿主污染，使用minimap2比对宿主库；比对参数 -ax map-ont 输出sam格式以及规定Oxford Nanopore reads比对模式"},"children":[]}]}]}]},{"data":{"id":"d3ejeji58cn4","created":1723527205305,"text":"输出文件夹：data_process_hostdb_*、data_process_rmhost_*"},"children":[]}]},{"data":{"id":"d3ejt0ns8mio","created":1723528339750,"text":"steps3.4 data_process_stat"},"children":[{"data":{"id":"d3ejtckybxfk","created":1723528365700,"text":"调用脚本：data_process_stat.py"},"children":[]},{"data":{"id":"d3ejtgkau6f4","created":1723528374368,"text":"脚本用途"},"children":[{"data":{"id":"d3ejtlvgwl4w","created":1723528385927,"text":"2.不去宿主由于结果数据和质控数据一样，少一些计算量。"},"children":[]},{"data":{"id":"d3ejttvud1q8","created":1723528403364,"text":"1.统计输入数据fq的数据量、reads数、GC含量、Q20和Q30等；"},"children":[]}]}]}]},"template":"right","theme":"fresh-blue-compat","version":"1.4.43"}